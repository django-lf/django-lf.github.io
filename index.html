<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>永远爱你</title>
    <link rel="stylesheet" href="css/index.css">
</head>

<body>
    <div class='textCon'>
        <a class="heart heart2" href="img.html" target="_blank"></a>
        <div id='code'>
            <div id="clock-box">
                <font color="#FF873F">
                    爱你一辈子<br>
                    现在是阿正和小田田在一起的
                    <div id="clock"></div>
                </font>
            </div>
        </div>
    </div>
</body>
<script src="js/bg_love.js"></script>
<script src="js/love.js"></script>
<script type="text/javascript" src="./js/jquery.min.js"></script>
<script type="text/javascript" src="./js/jscex.min.js"></script>
<script type="text/javascript" src="./js/jscex-parser.js"></script>
<script type="text/javascript" src="./js/jscex-jit.js"></script>
<script type="text/javascript" src="./js/jscex-builderbase.min.js"></script>
<script type="text/javascript" src="./js/jscex-async.min.js"></script>
<script type="text/javascript" src="./js/jscex-async-powerpack.min.js"></script>
<script type="text/javascript">
    (function ($) {
        $.fn.typewriter = function () {
            this.each(function () {
                var $ele = $(this), str = $ele.html().trim(), progress = 0;
                $ele.html('');
                var timer = setInterval(function () {
                    var current = str.substr(progress, 1)
                    if (current != '') { }
                    if (current == '<') {
                        progress = str.indexOf('>', progress) + 1;
                    } else {
                        progress++;
                    }
                    $ele.html(str.substring(0, progress) + (progress & 1 ? '_' : ''));
                    if (progress >= str.length) {
                        clearInterval(timer);
                    }
                }, 75);
            });
            return this;
        };
    })(jQuery);
    function timeElapse(date) {
        var current = Date();
        var seconds = (Date.parse(current) - Date.parse(date)) / 1000;
        var days = Math.floor(seconds / (3600 * 24));
        seconds = seconds % (3600 * 24);
        var hours = Math.floor(seconds / 3600);
        if (hours < 10) {
            hours = "0" + hours;
        }
        seconds = seconds % 3600;
        var minutes = Math.floor(seconds / 60);
        if (minutes < 10) {
            minutes = "0" + minutes;
        }
        seconds = seconds % 60;
        if (seconds < 10) {
            seconds = "0" + seconds;
        }
        var result = "第<span class=\"digit\">" + days + "</span> 天<span class=\"digit\">" + hours + "</span> 小时<span class=\"digit\">" + minutes + "</span> 分钟<span class=\"digit\">" + seconds + "</span> 秒";
        $("#clock").html(result);
    }
    (function () {
        var textAnimate = eval(Jscex.compile("async", function () {
            var together = new Date();
            together.setFullYear(2020, 1, 4);      //时间年月日
            together.setHours(1);            //小时
            together.setMinutes(33);          //分钟
            together.setSeconds(0);         //秒前一位
            together.setMilliseconds(0);        //秒第二位

            $("#code").show().typewriter();
            $("#clock-box").fadeIn(500);
            while (true) {
                timeElapse(together);
                $await(Jscex.Async.sleep(1000));
            }
        }));

        textAnimate().start();
    }())
</script>
</html>